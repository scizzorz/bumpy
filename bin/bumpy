#!/usr/bin/env python
import getopt, imp, os, sys
import bumpy

def _import(filename, module='__bumpy_main__'):
	if os.path.exists(filename):
		return imp.load_source(module, filename)

if __name__ == '__main__':
	module = None
	args = sys.argv[1:]
	show_help = False

	if len(args):
		if args[0] == '--version':
			print 'bumpy v' + bumpy.__version__
			sys.exit()
		elif args[0] in ('--file', '-f'):
			_import(args[1])
			args = args[2:]
		elif args[0] in ('--help', '-h'):
			show_help = True

	_import('bum.py')
	_import('build.py')

	if os.path.exists('bump'):
		for filename in os.listdir('bump'):
			basename, ext = os.path.splitext(filename)
			if ext != '.py': continue
			_import(os.path.join('bump', filename), basename)

	bumpy._help() if show_help else bumpy.main(args)
