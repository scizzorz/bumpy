#!/usr/bin/env python
import getopt, imp, os, sys
import bumpy

def inc(filename):
	if os.path.exists(filename):
		return imp.load_source('build', filename)

if __name__ == '__main__':
	module = None
	args = sys.argv[1:]

	if args[0] == '--version':
		print 'bumpy v' + bumpy.__version__
		sys.exit()
	elif args[0] in ('--file', '-f'):
		module = inc(args[1])
		args = args[2:]

	module = module or inc('bum.py') or inc('build.py')

	if not module:
		print 'Unable to load a proper bumpfile'
	else:
		bumpy.main(args)
